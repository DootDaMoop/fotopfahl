import { Kysely, sql } from 'kysely'

export async function up(db: Kysely<any>): Promise<void> {
    await db.schema
    .createTable('post')
    .addColumn('id', 'serial', (col) => col.primaryKey().notNull())
    .addColumn('userId', 'integer', (col) => col.notNull().references('user.id'))
    .addColumn('title', 'varchar(255)', (col) => col.notNull())
    .addColumn('description', 'varchar(255)') //ok if description is blank
    .addColumn('image', 'varchar(255)', (col) => col.notNull())
    .addColumn('mapData', 'jsonb', (col) => col.notNull()) 
    .addColumn('dataPermission', 'boolean', (col) => col.notNull())
    .addColumn('likes', 'integer', (col) => col.notNull().defaultTo(0)) //default to 0 so we dont have to set it initially 
    .execute()
//mapData. Need to figure out how we're going to get that map pin and then how we are passing that into the post (string, json, etc.)
}

export async function down(db: Kysely<any>): Promise<void> {
    await db.schema.dropTable('post').execute()
}